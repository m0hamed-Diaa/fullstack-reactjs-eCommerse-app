import{k as y,r as S,w as I,j as e,B as k,T as d,a as L,C as T,Z as l}from"./index-CZTSyGXU.js";import{u as C,o as D,a as E}from"./yup-XtEqT8nb.js";import{a as F}from"./axios.config-DUY_qHeS.js";import{H as _}from"./index-Cy3IHOK5.js";import{V as v}from"./v-stack-D2byFwNT.js";import{I as c}from"./input-BKlT5mRj.js";import{F as m,a as u,b as p}from"./field-CrZK7hg1.js";function V(){const{colorMode:a}=y(),[g,o]=S.useState(!1),x=I(),{handleSubmit:h,register:i,formState:{errors:r}}=C({resolver:D(E)}),f=async j=>{o(!0);try{const{status:t,data:s}=await F.post("auth/local",j);if(t===200){const w=Date.now(),A=1e3*60*60*24*30,n=new Date(w+A),b={path:"/",expires:n};T.set("AdminInfo",{jwt:s.jwt,email:s.user.email,userName:s.user.username,createdAt:s.user.createdAt},b),localStorage.setItem("admin_jwt_expires_at",String(n.getTime())),l.success("Admin login successfully!",{duration:1500}),setTimeout(()=>{x("/admin/dashboard",{replace:!0})},1500)}}catch(t){const s=t;l.error(s.response?.data?.error?.message||"Failed to login. Check your credentials.")}finally{o(!1)}};return e.jsx(e.Fragment,{children:e.jsxs(k,{w:"95%",maxW:"md",mx:"auto",my:"200px",p:"40px",style:{borderTopRightRadius:"80px",borderBottomLeftRadius:"80px"},bg:a==="dark"?"gray.900":"gray.100",color:a==="dark"?"white":"black",children:[e.jsx(_,{textAlign:"center",mb:3,children:"Admin Login"}),e.jsx(d,{textAlign:"center",color:"gray.400",mb:6,children:"Access the admin dashboard"}),e.jsxs(v,{as:"form",onSubmit:h(f),children:[e.jsxs(m,{invalid:!!r.identifier,children:[e.jsx(u,{children:"Email"}),e.jsx(c,{placeholder:"Enter admin email",type:"email",autoComplete:"current-email",...i("identifier")}),e.jsx(p,{children:r.identifier?.message})]}),e.jsxs(m,{invalid:!!r.password,children:[e.jsx(u,{children:"Password"}),e.jsx(c,{type:"password",placeholder:"Admin password",autoComplete:"current-password",...i("password")}),e.jsx(p,{children:r.password?.message})]}),e.jsx(L,{type:"submit",loadingText:"Logging in...",loading:g,width:"100%",mt:3,style:{backgroundColor:"orange",color:"white"},children:"Sign in as Admin"})]}),e.jsx(d,{textAlign:"center",mt:4,fontSize:"sm",color:"gray.500",children:"Admin credentials are stored securely"})]})})}export{V as default};
