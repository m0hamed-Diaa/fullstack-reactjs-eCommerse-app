import{r as v,k as A,w as D,j as e,B as d,a as g,T as r,F,I as L,L as T,C as _,Z as m}from"./index-CT5BJ4Bc.js";import{u as C,o as E,l as R}from"./yup-CeZlQl2K.js";import{a as N}from"./axios.config-DUY_qHeS.js";import{H as B}from"./index-KrhtSomb.js";import{V as W}from"./v-stack-CS0LGQy8.js";import{I as p}from"./input-sO2ygFRY.js";import{F as x,a as h,b as u}from"./field-CgeDpEYm.js";function X(){const[i,a]=v.useState(!1),{colorMode:n}=A(),f=D(),{handleSubmit:j,register:l,formState:{errors:t}}=C({resolver:E(R)}),w=async S=>{a(!0);try{const{status:s,data:o}=await N.post("/auth/local",S);if(s===200){const y=Date.now(),I=1e3*60*60*24*3,c=new Date(y+I),k={path:"/",expires:c};_.set("userInfo",{jwt:o.jwt,email:o.user.email,userName:o.user.username,createdAt:o.user.createdAt},k),localStorage.setItem("jwt_expires_at",String(c.getTime())),m.success("Login successfully!",{duration:1500}),setTimeout(()=>{f("/",{replace:!0})},1500)}}catch(s){const o=s;m.error(o.response?.data?.error?.message||"Failed login")}finally{a(!1)}},b=()=>{window.location.href="http://localhost:1337/api/connect/google"};return e.jsx(e.Fragment,{children:e.jsxs(d,{w:"95%",maxW:"md",mx:"auto",my:"200px",p:"40px",style:{borderTopRightRadius:"80px",borderBottomLeftRadius:"80px"},bg:n==="dark"?"gray.900":"gray.100",color:n==="dark"?"white":"black",children:[e.jsx(B,{textAlign:"center",mb:3,children:"Sign in to Accsses!"}),e.jsxs(W,{as:"form",onSubmit:j(w),children:[e.jsxs(x,{invalid:!!t.identifier,children:[e.jsx(h,{children:"Email"}),e.jsx(p,{placeholder:"Enter email",type:"email",autoComplete:"current-email",...l("identifier")}),e.jsx(u,{children:t.identifier?.message})]}),e.jsxs(x,{invalid:!!t.password,children:[e.jsx(h,{children:"Password"}),e.jsx(p,{type:"password",placeholder:"Password",autoComplete:"current-password",...l("password")}),e.jsx(u,{children:t.password?.message})]}),e.jsx(g,{type:"submit",loadingText:"Login in...",loading:i,width:"100%",mt:3,style:{backgroundColor:"orange",color:"white"},children:"Sign in"})]}),e.jsx(d,{position:"relative",w:"100%",h:"1px",bg:"gray.300",my:6,children:e.jsx(r,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",px:2,fontWeight:"bold",color:"white",bg:"gray.900",children:"OR"})}),e.jsx(g,{width:"100%",style:{backgroundColor:"#DB4437",color:"white"},_hover:{bg:"#c23321"},onClick:b,loading:i,loadingText:"Signing in...",pointerEvents:"none",children:e.jsxs(F,{align:"center",gap:"2",justify:"center",w:"100%",children:[e.jsx(L,{width:"28px",height:"28px",src:"./Google_logo_icon.png",alt:"iconGoogle"}),e.jsx(r,{fontWeight:"bold",children:"Sign in with Google"})]})}),e.jsxs(r,{textAlign:"center",mt:2,children:["No account?"," ",e.jsx(T,{to:"/register",style:{color:"orange",fontWeight:"bold",textDecoration:"underline"},children:"Sign up"})]})]})})}export{X as default};
