import{r as A,k as D,w as F,j as e,B as d,a as g,T as r,F as I,L,C as T,Z as m}from"./index-C6mX9qUY.js";import{u as C,o as E,l as R}from"./yup-Cfz4Sr4j.js";import{a as _}from"./axios.config-BIIX7z_g.js";import{H as N}from"./index-CXJgK1me.js";import{V as B}from"./v-stack-CCDzeePO.js";import{I as p}from"./input-Bfhk9cBp.js";import{F as x,a as h,b as u}from"./field-BKcXxE6C.js";function z(){const[i,a]=A.useState(!1),{colorMode:n}=D(),w=F(),{handleSubmit:f,register:l,formState:{errors:o}}=C({resolver:E(R)}),j=async S=>{a(!0);try{const{status:s,data:t}=await _.post("/auth/local",S);if(s===200){const y=Date.now(),k=1e3*60*60*24*3,c=new Date(y+k),v={path:"/",expires:c};T.set("userInfo",{jwt:t.jwt,email:t.user.email,userName:t.user.username,createdAt:t.user.createdAt},v),localStorage.setItem("jwt_expires_at",String(c.getTime())),m.success("Login successfully!",{duration:1500}),setTimeout(()=>{w("/",{replace:!0})},1500)}}catch(s){const t=s;m.error(t.response?.data?.error?.message||"Failed login")}finally{a(!1)}},b=()=>{window.location.href="http://localhost:1337/api/connect/google"};return e.jsx(e.Fragment,{children:e.jsxs(d,{w:"95%",maxW:"md",mx:"auto",my:"200px",p:"40px",style:{borderTopRightRadius:"80px",borderBottomLeftRadius:"80px"},bg:n==="dark"?"gray.900":"gray.100",color:n==="dark"?"white":"black",children:[e.jsx(N,{textAlign:"center",mb:3,children:"Sign in to Accsses!"}),e.jsxs(B,{as:"form",onSubmit:f(j),children:[e.jsxs(x,{invalid:!!o.identifier,children:[e.jsx(h,{children:"Email"}),e.jsx(p,{placeholder:"Enter email",type:"email",autoComplete:"current-email",...l("identifier")}),e.jsx(u,{children:o.identifier?.message})]}),e.jsxs(x,{invalid:!!o.password,children:[e.jsx(h,{children:"Password"}),e.jsx(p,{type:"password",placeholder:"Password",autoComplete:"current-password",...l("password")}),e.jsx(u,{children:o.password?.message})]}),e.jsx(g,{type:"submit",loadingText:"Login in...",loading:i,width:"100%",mt:3,style:{backgroundColor:"orange",color:"white"},children:"Sign in"})]}),e.jsx(d,{position:"relative",w:"100%",h:"1px",bg:"gray.300",my:6,children:e.jsx(r,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",px:2,fontWeight:"bold",color:"white",bg:"gray.900",children:"OR"})}),e.jsx(g,{width:"100%",style:{backgroundColor:"#DB4437",color:"white"},_hover:{bg:"#c23321"},onClick:b,loading:i,loadingText:"Signing in...",pointerEvents:"none",children:e.jsxs(I,{align:"center",gap:"2",justify:"center",w:"100%",children:[e.jsx("img",{width:"28px",height:"28px",src:"../../src/assets/Google logo icon wit.png",alt:"iconGoogle"}),e.jsx(r,{fontWeight:"bold",children:"Sign in with Google"})]})}),e.jsxs(r,{textAlign:"center",mt:2,children:["No account?"," ",e.jsx(L,{to:"/register",style:{color:"orange",fontWeight:"bold",textDecoration:"underline"},children:"Sign up"})]})]})})}export{z as default};
