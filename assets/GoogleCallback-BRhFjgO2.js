import{w as i,r as l,Z as s,j as g,C as u}from"./index-CZTSyGXU.js";import{a as m}from"./axios.config-DUY_qHeS.js";const x=()=>{const e=i();return l.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("jwt");if(!t){s.error("Google login failed"),e("/login",{replace:!0});return}(async()=>{try{const{data:a}=await m.get("/users/me",{headers:{Authorization:`Bearer ${t}`}}),o=Date.now(),n=1e3*60*60*24*3,r=new Date(o+n),c={path:"/",expires:r};u.set("userInfo",{jwt:t,email:a.email,userName:a.username,createdAt:a.createdAt},c),localStorage.setItem("jwt_expires_at",String(r.getTime())),s.success("Login with Google successfully!"),e("/",{replace:!0})}catch{s.error("Failed to fetch user data"),e("/login")}})()},[e]),g.jsx("p",{children:"Signing in with Google..."})};export{x as default};
